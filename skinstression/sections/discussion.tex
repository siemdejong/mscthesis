\section{Discussion}

\subsection{Logistic curve fits stress-strain curves better than an exponential or PCA}
With an $\overline{R^2} \approx \num{0.9984}$ (SE \num{0.0002}), the logistic curve fits stress-strain data (\cref{fig:logistic_fits}) better ($p < 0.01$) than the exponential or PCA ($\overline{R^2} \approx \num{0.9926}$ (SE \num{0.0003}), \cref{fig:pca_fits}).
The exponential does not fit the plateau that is often present at the end of a stress-strain curve (\cref{fig:exp_fits}).
This plateau is essential to the skin tissue dynamics.
It shows at which point the integrity of the collagen matrix breaks down, \ie when the skin cannot resist the force acting on it.
PCA had to be done after truncating all curves to maximum strain of the curve with the smallest maximum strain.
This resulted in PCA fits that only described the first region of the curve.
Moreover, to fairly create PCA fits, PCA has to be trained on a training set and values extracted from the test set must be projected onto this test set.
This may lead to generalizability problems.
For these reasons, the logistic curve parameters are used as a predictors.

\subsection{Shannon entropy is a better measure to exclude noise in collagen images than kurtosis}\label{sec:disc_ent_vs_kur}
Kurtosis and Shannon entropy were used to exclude noise in SHG image of collagen.
For rather homogeneous images like stack 8, kurtosis is able to characterize the fogginess, while entropy finds images of equal quality.
However, for well-structured tissue like stack 11, 12, 13 and 4, entropy recognizes faint images and qualifies them as bad.
This is particularly useful for images that did not include any useful information (like stack 37).
Kurtosis does not succeed to distinguish dark images from bright ones.
Kurtosis also has the tendency to fluctuate, which is unexpected between subsequent slices.
For these reasons, Shannon entropy has been used to choose the top $N_\mathrm{best}$ images.

% \subsection{Stretch information can be extracted from SHG microscopy images}
% \Cref{fig:skinstression-test-logistic-curves} shows that for most images, it is possible to extract stretch information.
% Using the model, ten images from different stacks of the train set yield a stress-strain curve with $R^2>0.9$.
% This shows that stretch information is present, even in the drastically downsized images.

\subsection{The model does not generalize well}
Although the train results were promising, the test results of \cref{fig:skinstression-test} show a lack of generalizability.
Only two images from different stacks of the test set yield a stress-strain curve with $R^2=0.99$.
This shows that the training set does not include enough features similar to the features in the test set.
As most of the images in the test set belong to one person, it may be possible that this person has exceptional skin tissue compared to samples in the training set.
More images need to be included in the training set for the model to generalize well to held-out test cases.

\subsection{Artificially increasing collagen density increases maximum stress prediction and stiffness and vice versa}
As shown in \cref{fig:pred_output_attack}, artificially filling holes with collagen increases the maximum stress significantly and increases the maximum Young's modulus slightly.
This is expected, as an increase in collagen density generally is an increase in the number of springs in the system.
Adding springs increases the stiffness.
The increase in maximum stress is likely due to the addition of springs supporting each other dividing the load.
On the contrary, with comparable reasoning, artificially decreasing the collagen density by duplicating a hole lowers both the maximum stress and Young's modulus.

\subsection{Future studies}
\subsubsection{Perform cross validation and increase data variance}
In this study, no cross validation is performed.
Training a network on different training subsets might increase the performance on the test set.
The test set might include patterns that were not present in the training set and therefore will not activate critical parts of the neural network.
The split between training and test sets should be made such that the training set has high variance and is thus a reasonably good estimate of the whole population, without knowing test set images.

Therefore, the training set should also include images from human skin that is damaged in any way.
For example, damaged tissue is caused by smoking \sidecite{Lipa2021} or wounds that left behind scars with an increased tensile strength \sidecite{Wilkinson2020}.
Moreover, aging drastically impacts skin tissue integrity.
It is unknown if stretch of young skin tissue is predicted well by the neural network.
Therefore, the neural network should only be used to predict from old skin tissue.

Skin tissue from other body parts might show different stretch properties.
Therefore, it is unknown if the stretch of skin tissues other than from the upper leg can be predicted.

Lastly, to increase variance, more images of skin tissue from more individuals should be included.

\subsubsection{Split dataset before image and target transformations}
LDS should only be performed on the training set, independently from the validation and test set.
This is to prevent leaking data to the training set.
By design, the software constructs train, validation and test split datasets with data transformations, including target transformations such as LDS and the Yeo-Johnson transformation.
Every split in fact contains all $N_\mathrm{best}$ images and includes transformations.
Just before constructing a dataloader, the datasets are split by index, leaving the dataloaders with non-overlapping data.
In future studies, the dataset should be split into subsets with their specific transformations applied.
While this increases training fairness, it is expected to decrease performance, as information from the test set is not leaked to the training set.

Moreover, the split indices were generated by shuffling $\{1,\, 2,\, 3,\, \ldots,\, N_\mathrm{images}\}$ and splitting the indices at \qty{80}{\percent}, giving indices for the training/validation and test set.
Next, a new set of indices, $\{1,\, 2,\, 3,\, \ldots,\, \qty{80}{\percent} \cdot N_\mathrm{images}\}$ is shuffled and split at \qty{80}{\percent}, yielding indices for the training and validation set.
All splits were stratified by person, meaning the shuffle was done in such a way that images from the same person could not live in the training or validation set.
This way, the training and validation set had overlap with the test set, but not with each other.
To create an independent test set, the operation
\begin{equation}\label{eq:skin_newtest_idx}
    \texttt{actual test} = \texttt{test} - (\texttt{train} \cup \texttt{validation})
\end{equation}
was performed.
However, this does not make use of the full dataset.
To achieve that, \cref{eq:skin_newtest_idx} should be rewritten as
\begin{equation}
    \texttt{actual test} = \{1,\, 2,\, 3,\, \ldots,\, N_\mathrm{images}\} - (\texttt{train} \cup \texttt{validation}).
\end{equation}
This version of \texttt{actual test} has one major drawback, which is that the \qty{20}{\percent} highest indices are reserved for the test set, effectively excluding them from the shuffle, leaving a test set with most samples from one person.
A future study should perform a train/validation split on shuffled indices after splitting off the test set.

\subsubsection{Excluding noise and denoising on stack level}
Currently, the stacks are truncated by taking the top $N_\mathrm{best}$ images of a stack which effectively excludes noisy slices.
However, if a full z-stack is noisy, noisy images are still included.
These noisy images may still harm training and could be excluded, too.
Possibly, excluding noisy stacks can for example be done by calculating the Shannon entropy of all truncated stacks and include stacks with the highest entropy.

In addition to noise exclusion, denoising stacks with three-dimensional Noise2Void~\sidecite{Krull2019} or individual slices with Noise2Void2~\sidecite{Hock2022}\sidenote{At the time of writing, Noise2Void2 is not yet compatible with three-dimensional images.} could increase model performance.
This is because noise can occlude patterns that describe stretch information.

\subsubsection{Three-dimensional and full-size images}
The current model relies on single images belonging to stacks.
All structural information in the depth direction is disregarded by the neural network.
If the neural network is redesigned to recognize patterns in three dimensions, it is expected to better predict the skin stretch properties.

The microscope outputting the SHG images has the ability to image with a resolution of \qty{0.2}{\micro\meter}, which is five times higher than the images used in this study.
Higher resolution images contain more detailed information on the collagen structure, and are therefore expected to increase the performance.
The presented model has to be redesigned to accept images larger than $258\times258$.
Moreover, raw data is stored with a larger dynamic range (16-bit instead of 8-bit).
Being able to see small differences in neighboring pixel intensities increases the available information \eg in darker regions, where collagen is sparse, but still significantly present.

\subsubsection{Weighting samples by goodness of target fit}
The neural network learns from targets that are a result of logistic curves fitted to a series of points.
The goodness of fit differs between curves.
Fits that do not describe the data well should not negatively impact the model training.
One way to achieve this is by re-weighting the loss function as
\begin{equation}
    \mathcal{L}_{R^2\,\mathrm{weighted}} =
    \begin{cases}
        \mathcal{L} / \left(R^2\right)^b & \text{if } R^2 > a     \\
        \mathcal{L} / a^b                & \text{if } R^2 \leq a,
    \end{cases}
\end{equation}
where $a$ is a lower bound to $R^2$ and $b > 0$ can influence the amount of weighting.

\subsection{Implications}
\subsubsection{Replacement of mechanical measurements}
After training and validating on more data, Skinstression might be used to replace mechanical measurements of stress-strain curves by excising human skin tissue and imaging the dermis layer with an SHG microscope at \qty{0.2}{mpp}.

\subsection{Clinical \emph{in vivo} skin studies}
An example of clinical use could ultimately be to study skin tissue \emph{in vivo} by a plastic surgeon with a microendoscope as described by \citeauthor{Kuzmin2016} \sidecite{Kuzmin2016}, but for SHG imaging.
Stretch information could be inferred directly from the images made by the microendoscope.
This way, the surgeon can acquire specific patient skin information prior to surgery.
It is important to note that the model in its current form has low predictive accuracy, and needs further research for this use case.